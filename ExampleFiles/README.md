# Machine Protein Recognition

Author: Wout van Helvoirt

Build: January 19th, 2017

Version: 1.0

The ExampleFiles directory contains example configuration files to use for setting up the model, some test pdb files, a bash file to run the training program via a slurm manager and a bash file to collect the pdb id's from a cullpdb file.

### Collecting the PDB files
```
1 - [REQUIRED] Input cull pdb file to process.
2 - [REQUIRED] Input file path directory containing the pdb files.
```
A small Bash program (`get_pdb_from_cullpdb.sh`) that requires the user to specify a directory containing pdb files and the cullpdb file containing the pdb id's. The program uses the pdb id's located in the cullpdb file to locate the corresponding pdb files in the given location directory. The located files are copied to a new folder named `pdb_files` at the current position. 

#### Example command:
```
get_pdb_from_cullpdb.sh /location/of/cullpdb/file /location/of/pdb/files/
```
This command will parse the cullpdb file, locate the pdb files from the cullpdb file in the specified directory and copies them to a new directory at the current location.

### Running a batch job via slurm
With the `slurm_batch_training.sh` Bash file, the training could be done on a server using a GPU. This can be helpful when running a long training session for multiple days at a time.

### Model configuration files
In the `model_config_files` directory, there are some configuration files that can be used for creating the model. These json files must always contain a `layer_config` and `compile_config`. The settings used within each config can be found in the Keras API documentation and those should be followed. A difference in the `layer_config` is the `input_shape_dimensions` and the missing `input_shape` argument in the config of the first layer. The `input_shape` is generated by the python program using the window size and multichannel arguments. However, it does need to know the amount of dimensions of the input shape excluding the amount samples. Some examples can be found below:
* An `input_shape_dimensions` of 1 could generate an `input_shape` of (None, 50)
* An `input_shape_dimensions` of 2 could generate an `input_shape` of (None, 100, 100)
* An `input_shape_dimensions` of 3 could generate an `input_shape` of (None, 3, 100, 100)
* An `input_shape_dimensions` of 4 could generate an `input_shape` of (None, 1, 80 , 80, 80)
* An `input_shape_dimensions` of 5 could generate an `input_shape` of (None, 3, 100, 100, 100, 100)

NOTE: The dataset creator uses a image dimension ordering like examples 3, 4 and 5. For each layer, `the dim_ordering` argument should always be set to 'th' (Theano API way of sorting).
NOTE: All values need double quotes. If the values need to be read as string values, they should also have single quotes within the double quotes.
